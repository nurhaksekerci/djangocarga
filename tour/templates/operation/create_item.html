{% extends "base.html" %}
{% load i18n %}
{% load widget_tweaks %}
{% load custom_filters %}
{% load static %}

{% block title %}Operasyon Öğesi Oluştur{% endblock %}

{% block extra_css %}
<style>
    :root {
        --primary-color: #2c3e50;
        --secondary-color: #3498db;
        --success-color: #2ecc71;
        --warning-color: #f1c40f;
        --danger-color: #e74c3c;
        --light-bg: #f8f9fa;
        --border-color: #e9ecef;
    }

    body {
        background-color: var(--light-bg);
        font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
    }

    .navbar {
        background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        padding: 1rem 0;
        margin-bottom: 2rem;
    }

    .navbar-brand {
        color: white !important;
        font-weight: 600;
        font-size: 1.5rem;
    }

    .card {
        border: none;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.08);
        margin-bottom: 2rem;
        transition: transform 0.3s ease;
    }

    .card:hover {
        transform: translateY(-5px);
    }

    .card-header {
        background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        color: white;
        border-radius: 15px 15px 0 0 !important;
        padding: 1.5rem;
    }

    .card-header h3 {
        margin: 0;
        font-weight: 600;
        display: flex;
        align-items: center;
    }

    .header-actions {
        display: flex;
        gap: 1rem;
    }

    .btn-custom {
        padding: 0.5rem 1.25rem;
        border-radius: 8px;
        font-weight: 500;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        border: none;
    }

    .btn-edit {
        background-color: rgba(255, 255, 255, 0.1);
        color: white;
        backdrop-filter: blur(5px);
    }

    .btn-edit:hover {
        background-color: rgba(255, 255, 255, 0.2);
        transform: translateY(-2px);
    }

    .btn-delete {
        background-color: rgba(231, 76, 60, 0.1);
        color: white;
        backdrop-filter: blur(5px);
    }

    .btn-delete:hover {
        background-color: rgba(231, 76, 60, 0.2);
        transform: translateY(-2px);
    }

    .header-icon {
        font-size: 1.2rem;
        margin-right: 0.5rem;
        opacity: 0.9;
    }

    .header-title {
        font-size: 1.5rem;
        letter-spacing: 0.5px;
    }

    .card-body {
        padding: 2rem;
    }

    .detail-grid {
        display: flex;
        justify-content: space-between;
        gap: 0.5rem;
        width: 100%;
    }

    .detail-section {
        background: white;
        border-radius: 10px;
        padding: 0.75rem;
        box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        border: 1px solid var(--border-color);
        display: flex;
        flex-direction: column;
        justify-content: center;
        flex: 1;
        min-height: 90px;
    }

    .detail-label {
        font-weight: 600;
        color: var(--primary-color);
        font-size: 0.7rem;
        text-transform: uppercase;
        letter-spacing: 0.3px;
        margin-bottom: 0.25rem;
        display: flex;
        align-items: center;
    }

    .detail-value {
        color: #2c3e50;
        font-size: 0.9rem;
        font-weight: 500;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .info-icon {
        color: var(--secondary-color);
        margin-right: 0.4rem;
        font-size: 0.8rem;
    }

    .status-badge {
        padding: 0.4rem 0.8rem;
        border-radius: 20px;
        font-weight: 500;
        font-size: 0.8rem;
        display: inline-flex;
        align-items: center;
        gap: 0.4rem;
    }

    .status-badge i {
        font-size: 0.8rem;
    }

    .status-draft {
        background-color: #f8f9fa;
        color: #6c757d;
    }

    .status-confirmed {
        background-color: #e3f2fd;
        color: #1976d2;
    }

    .status-completed {
        background-color: #e8f5e9;
        color: #2e7d32;
    }

    .status-cancelled {
        background-color: #ffebee;
        color: #c62828;
    }

    .section-title {
        color: var(--primary-color);
        font-weight: 600;
        margin-bottom: 1.5rem;
        padding-bottom: 0.5rem;
        border-bottom: 2px solid var(--border-color);
    }
    .d-flex {
        display: flex;
    }
    .justify-content-between {
        justify-content: space-between;
    }
    .align-items-center {
        align-items: center;
    }

    @media (max-width: 1400px) {
        .detail-label {
            font-size: 0.65rem;
        }
        .detail-value {
            font-size: 0.85rem;
        }
        .detail-section {
            padding: 0.6rem;
        }
    }

    @media (max-width: 768px) {
        .card-body {
            padding: 1rem;
        }
        .detail-grid {
            flex-wrap: wrap;
        }
        .detail-section {
            flex: 1 1 calc(50% - 0.5rem);
        }
    }

</style>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
<style>

    :root {
        --primary-color: #2c3e50;
        --secondary-color: #3498db;
        --success-color: #2ecc71;
        --warning-color: #f1c40f;
        --danger-color: #e74c3c;
        --light-bg: #f8f9fa;
        --border-color: #e9ecef;
    }

    body {
        background-color: var(--light-bg);
        font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
    }

    .navbar {
        background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        padding: 1rem 0;
        margin-bottom: 2rem;
    }

    .navbar-brand {
        color: white !important;
        font-weight: 600;
        font-size: 1.5rem;
    }

    .card {
        border: none;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.08);
        margin-bottom: 2rem;
        transition: transform 0.3s ease;
    }

    .card:hover {
        transform: translateY(-5px);
    }

    .card-header {
        background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        color: white;
        border-radius: 15px 15px 0 0 !important;
        padding: 1.5rem;
    }

    .card-header h3 {
        margin: 0;
        font-weight: 600;
        display: flex;
        align-items: center;
    }

    .header-actions {
        display: flex;
        gap: 1rem;
    }

    .btn-custom {
        padding: 0.5rem 1.25rem;
        border-radius: 8px;
        font-weight: 500;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        border: none;
    }

    .btn-edit {
        background-color: rgba(255, 255, 255, 0.1);
        color: white;
        backdrop-filter: blur(5px);
    }

    .btn-edit:hover {
        background-color: rgba(255, 255, 255, 0.2);
        transform: translateY(-2px);
    }

    .btn-delete {
        background-color: rgba(231, 76, 60, 0.1);
        color: white;
        backdrop-filter: blur(5px);
    }

    .btn-delete:hover {
        background-color: rgba(231, 76, 60, 0.2);
        transform: translateY(-2px);
    }

    .header-icon {
        font-size: 1.2rem;
        margin-right: 0.5rem;
        opacity: 0.9;
    }

    .header-title {
        font-size: 1.5rem;
        letter-spacing: 0.5px;
    }

    .card-body {
        padding: 2rem;
    }

    .detail-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1rem;
        width: 100%;
    }

    .detail-section {
        background: white;
        border-radius: 10px;
        padding: 1rem;
        box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        border: 1px solid var(--border-color);
    }

    .detail-label {
        font-weight: 600;
        color: var(--primary-color);
        font-size: 0.7rem;
        text-transform: uppercase;
        letter-spacing: 0.3px;
        margin-bottom: 0.25rem;
        display: flex;
        align-items: center;
    }

    .detail-value {
        color: #2c3e50;
        font-size: 0.9rem;
        font-weight: 500;
    }

    .info-icon {
        color: var(--secondary-color);
        margin-right: 0.4rem;
        font-size: 0.8rem;
    }

    .section-title {
        color: var(--primary-color);
        font-weight: 600;
        margin: 2rem 0 1rem;
        padding-bottom: 0.5rem;
        border-bottom: 2px solid var(--border-color);
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .status-badge {
        padding: 0.4rem 0.8rem;
        border-radius: 20px;
        font-weight: 500;
        font-size: 0.8rem;
        display: inline-flex;
        align-items: center;
        gap: 0.4rem;
    }

    .status-badge i {
        font-size: 0.8rem;
    }

    .status-active {
        background-color: #e8f5e9;
        color: #2e7d32;
    }

    .status-inactive {
        background-color: #ffebee;
        color: #c62828;
    }

    @media (max-width: 768px) {
        .card-body {
            padding: 1rem;
        }
        .detail-grid {
            grid-template-columns: 1fr;
        }
    }
</style>
{% endblock %}
{% block content %}
<div x-data="{
    vehicleModal: false,
    noVehicleModal: false,
    activityModal: false,
    guideModal: false,
    hotelModal: false,
    museumModal: false,
    expenseModal: false,
    transferModal: false,
    tourModal: false,
    subItemActivityModal: false,
    selectedItemId: null,
    selectedDayId: null,
    operationModal: false,
    {% for customer in customers %}
    updateCustomerModal{{ customer.id }}: false,
    {% endfor %}
    {% for sales_price in sales_prices %}
    updateSalesPriceModal{{ sales_price.id }}: false,
    {% endfor %}
    {% for item in operation_items %}
    {% if item.item_type == 'VEHICLE' %}
        updateVehicleModal{{ item.id }}: false,
    {% elif item.item_type == 'NO_VEHICLE_TOUR' %}
        updateNoVehicleTourModal{{ item.id }}: false,
    {% elif item.item_type == 'NO_VEHICLE_ACTIVITY' %}
        updateNoVehicleActivityModal{{ item.id }}: false,
    {% endif %}
    {% endfor %}
    {% for sub_item in operation_sub_items %}
        {% if sub_item.subitem_type == 'TOUR' %}
            updateTourModal{{ sub_item.id }}: false,
        {% elif sub_item.subitem_type == 'TRANSFER' %}
            updateTransferModal{{ sub_item.id }}: false,
        {% elif sub_item.subitem_type == 'MUSEUM' %}
            updateMuseumModal{{ sub_item.id }}: false,
        {% elif sub_item.subitem_type == 'HOTEL' %}
            updateHotelModal{{ sub_item.id }}: false,
        {% elif sub_item.subitem_type == 'GUIDE' %}
            updateGuideModal{{ sub_item.id }}: false,
        {% elif sub_item.subitem_type == 'ACTIVITY' %}
            updateActivityModal{{ sub_item.id }}: false,
        {% elif sub_item.subitem_type == 'OTHER_PRICE' %}
            updateOtherPriceModal{{ sub_item.id }}: false,
        {% endif %}
    {% endfor %}
}">
    <div class="container-fluid">
        <div class="container mx-auto px-4 py-8">
            <div class="grid grid-cols-12 gap-4">
                <!-- Operasyon Detayları -->
                <div class="col-span-12">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h3>
                                <i class="fas fa-file-alt header-icon"></i>
                                <span class="header-title">Operasyon Detayları</span>
                            </h3>
                            <div class="header-actions">
                                <button type="button" class="btn btn-custom btn-edit" @click="operationModal = true">
                                    <i class="fas fa-edit"></i>
                                    Düzenle
                                </button>
                                <a href="{% url 'tour:toggle_operation' operation.id %}?next={{ request.path }}" class="btn btn-custom btn-delete">
                                    <i class="fas fa-trash"></i>
                                    Sil
                                </a>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="flex flex-col space-y-4">
                                <div class="detail-grid">
                                    <div class="detail-section">
                                        <div class="detail-label">
                                            <i class="fas fa-hashtag info-icon"></i>
                                            Referans Numarası
                                        </div>
                                        <div class="detail-value" id="referenceNumber">{{ operation.reference_number|upper }}</div>
                                    </div>
                                    <div class="detail-section">
                                        <div class="detail-label">
                                            <i class="fas fa-info-circle info-icon"></i>
                                            Durum
                                        </div>
                                        <div class="detail-value">
                                            <span class="status-badge" id="status">{{ operation.get_status_display|upper }}</span>
                                        </div>
                                    </div>
                                    <div class="detail-section">
                                        <div class="detail-label">
                                            <i class="fas fa-handshake info-icon"></i>
                                            Alıcı Şirket
                                        </div>
                                        <div class="detail-value" id="buyerCompany">{{ operation.buyer_company.name|upper }}</div>
                                    </div>
                                    <div class="detail-section">
                                        <div class="detail-label">
                                            <i class="fas fa-user-plus info-icon"></i>
                                            Oluşturan
                                        </div>
                                        <div class="detail-value" id="createdBy">{{ operation.created_by.first_name|upper }} {{ operation.created_by.last_name|upper }}</div>
                                    </div>
                                    <div class="detail-section">
                                        <div class="detail-label">
                                            <i class="fas fa-user-check info-icon"></i>
                                            Takip Eden
                                        </div>
                                        <div class="detail-value" id="followBy">{{ operation.follow_by.first_name|upper }} {{ operation.follow_by.last_name|upper }}</div>
                                    </div>
                                    
                                </div>
                                <div class="detail-section">
                                    <div class="detail-label">
                                        <i class="fas fa-user-check info-icon"></i>
                                        Notlar
                                    </div>
                                    <div class="detail-value" id="notes">{{ operation.notes|upper }}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Müşteri Bilgileri -->
                {% if customers %}
                    <div class="col-span-12">
                        <div class="card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h3>
                                    <i class="fas fa-file-alt header-icon"></i>
                                    <span class="header-title">Müşteriler</span>
                                </h3>
                            </div>
                            <div class="card-body">
                                <div class="detail-grid">
                                    {% for customer in customers %}
                                    <div class="detail-section">
                                        <div class="detail-label">
                                            <i class="fas fa-user info-icon"></i>
                                            Müşteri
                                        </div>
                                        <div class="detail-value">{{ customer.first_name|upper }} {{ customer.last_name|upper }}</div>
                                    </div>
                                    <div class="detail-section">
                                        <div class="detail-label">
                                            <i class="fas fa-phone info-icon"></i>
                                            İletişim
                                        </div>
                                        <div class="detail-value">{{ customer.contact_info }}</div>
                                    </div>
                                    <div class="detail-section">
                                        <div class="detail-label">
                                            <i class="fas fa-tag info-icon"></i>
                                            Tip
                                        </div>
                                        <div class="detail-value">{{ customer.customer_type }}</div>
                                    </div>
                                    <div class="detail-section">
                                        <div class="detail-label">
                                            <i class="fas fa-calendar info-icon"></i>
                                            Doğum Tarihi
                                        </div>
                                        <div class="detail-value">{{ customer.birth_date|date:"d.m.Y" }}</div>
                                    </div>
                                    <div class="detail-section">
                                        <div class="detail-label">
                                            <i class="fas fa-passport info-icon"></i>
                                            Pasaport
                                        </div>
                                        <div class="detail-value">{{ customer.passport_no }}</div>
                                    </div>
                                    <div class="detail-section">
                                        <div class="detail-label">
                                            <i class="fas fa-money-bill info-icon"></i>
                                            İşlemler
                                        </div>
                                        <div class="detail-value">
                                            <button type="button" class="btn btn-custom btn-edit" @click="updateCustomerModal{{ customer.id }} = true" style="background-color: #007bff; color: white;">
                                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M11.4001 18.1612L11.4001 18.1612L18.796 10.7653C17.7894 10.3464 16.5972 9.6582 15.4697 8.53068C14.342 7.40298 13.6537 6.21058 13.2348 5.2039L5.83882 12.5999L5.83879 12.5999C5.26166 13.1771 4.97307 13.4657 4.7249 13.7838C4.43213 14.1592 4.18114 14.5653 3.97634 14.995C3.80273 15.3593 3.67368 15.7465 3.41556 16.5208L2.05445 20.6042C1.92743 20.9852 2.0266 21.4053 2.31063 21.6894C2.59466 21.9734 3.01478 22.0726 3.39584 21.9456L7.47918 20.5844C8.25351 20.3263 8.6407 20.1973 9.00498 20.0237C9.43469 19.8189 9.84082 19.5679 10.2162 19.2751C10.5343 19.0269 10.823 18.7383 11.4001 18.1612Z" fill="currentColor"></path>
                                                    <path d="M20.8482 8.71306C22.3839 7.17735 22.3839 4.68748 20.8482 3.15178C19.3125 1.61607 16.8226 1.61607 15.2869 3.15178L14.3999 4.03882C14.4121 4.0755 14.4246 4.11268 14.4377 4.15035C14.7628 5.0875 15.3763 6.31601 16.5303 7.47002C17.6843 8.62403 18.9128 9.23749 19.85 9.56262C19.8875 9.57563 19.9245 9.58817 19.961 9.60026L20.8482 8.71306Z" fill="currentColor"></path>
                                                </svg>
                                            </button>
                                            <a href="{% url 'tour:toggle_customer' customer.id %}?next={{ request.path }}" class="btn btn-custom btn-edit" style="background-color: #007bff; color: white;">
                                                {% if customer.is_active %}
                                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                        <path opacity="0.5" d="M11.5956 22.0001H12.4044C15.1871 22.0001 16.5785 22.0001 17.4831 21.1142C18.3878 20.2283 18.4803 18.7751 18.6654 15.8686L18.9321 11.6807C19.0326 10.1037 19.0828 9.31524 18.6289 8.81558C18.1751 8.31592 17.4087 8.31592 15.876 8.31592H8.12405C6.59127 8.31592 5.82488 8.31592 5.37105 8.81558C4.91722 9.31524 4.96744 10.1037 5.06788 11.6807L5.33459 15.8686C5.5197 18.7751 5.61225 20.2283 6.51689 21.1142C7.42153 22.0001 8.81289 22.0001 11.5956 22.0001Z" fill="currentColor"></path>
                                                        <path d="M3 6.38597C3 5.90152 3.34538 5.50879 3.77143 5.50879L6.43567 5.50832C6.96502 5.49306 7.43202 5.11033 7.61214 4.54412C7.61688 4.52923 7.62232 4.51087 7.64185 4.44424L7.75665 4.05256C7.8269 3.81241 7.8881 3.60318 7.97375 3.41617C8.31209 2.67736 8.93808 2.16432 9.66147 2.03297C9.84457 1.99972 10.0385 1.99986 10.2611 2.00002H13.7391C13.9617 1.99986 14.1556 1.99972 14.3387 2.03297C15.0621 2.16432 15.6881 2.67736 16.0264 3.41617C16.1121 3.60318 16.1733 3.81241 16.2435 4.05256L16.3583 4.44424C16.3778 4.51087 16.3833 4.52923 16.388 4.54412C16.5682 5.11033 17.1278 5.49353 17.6571 5.50879H20.2286C20.6546 5.50879 21 5.90152 21 6.38597C21 6.87043 20.6546 7.26316 20.2286 7.26316H3.77143C3.34538 7.26316 3 6.87043 3 6.38597Z" fill="currentColor"></path>
                                                        <path fill-rule="evenodd" clip-rule="evenodd" d="M9.42543 11.4815C9.83759 11.4381 10.2051 11.7547 10.2463 12.1885L10.7463 17.4517C10.7875 17.8855 10.4868 18.2724 10.0747 18.3158C9.66253 18.3592 9.29499 18.0426 9.25378 17.6088L8.75378 12.3456C8.71256 11.9118 9.01327 11.5249 9.42543 11.4815Z" fill="currentColor"></path>
                                                        <path fill-rule="evenodd" clip-rule="evenodd" d="M14.5747 11.4815C14.9868 11.5249 15.2875 11.9118 15.2463 12.3456L14.7463 17.6088C14.7051 18.0426 14.3376 18.3592 13.9254 18.3158C13.5133 18.2724 13.2126 17.8855 13.2538 17.4517L13.7538 12.1885C13.795 11.7547 14.1625 11.4381 14.5747 11.4815Z" fill="currentColor"></path>
                                                    </svg>
                                                {% else %}
                                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                        <path fill-rule="evenodd" clip-rule="evenodd" d="M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12ZM5.46056 11.0833C5.83331 7.79988 8.62404 5.25 12.0096 5.25C14.148 5.25 16.0489 6.26793 17.2521 7.84246C17.5036 8.17158 17.4406 8.64227 17.1115 8.89376C16.7824 9.14526 16.3117 9.08233 16.0602 8.7532C15.1289 7.53445 13.6613 6.75 12.0096 6.75C9.45213 6.75 7.33639 8.63219 6.9733 11.0833H7.33652C7.63996 11.0833 7.9135 11.2662 8.02953 11.5466C8.14556 11.8269 8.0812 12.1496 7.86649 12.364L6.69823 13.5307C6.40542 13.8231 5.9311 13.8231 5.63829 13.5307L4.47003 12.364C4.25532 12.1496 4.19097 11.8269 4.30699 11.5466C4.42302 11.2662 4.69656 11.0833 5 11.0833H5.46056ZM18.3617 10.4693C18.0689 10.1769 17.5946 10.1769 17.3018 10.4693L16.1335 11.636C15.9188 11.8504 15.8545 12.1731 15.9705 12.4534C16.0865 12.7338 16.3601 12.9167 16.6635 12.9167H17.0267C16.6636 15.3678 14.5479 17.25 11.9905 17.25C10.3464 17.25 8.88484 16.4729 7.9529 15.2638C7.70002 14.9358 7.22908 14.8748 6.90101 15.1277C6.57295 15.3806 6.512 15.8515 6.76487 16.1796C7.96886 17.7416 9.86205 18.75 11.9905 18.75C15.376 18.75 18.1667 16.2001 18.5395 12.9167H19C19.3035 12.9167 19.577 12.7338 19.693 12.4534C19.8091 12.1731 19.7447 11.8504 19.53 11.636L18.3617 10.4693Z" fill="currentColor"></path>
                                                    </svg>
                                                {% endif %}
                                            </a>
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Müşteri Güncelleme Modalları -->
                    {% for customer in customers %}
                        {% include "operation/modals/update_customer_modal.html" with customer=customer form=customer_forms|get_item:customer.id %}
                    {% endfor %}
                {% endif %}

                <!-- Satış Fiyatları -->
                {% if sales_prices %}
                <div class="col-span-12">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h3>
                                <i class="fas fa-file-alt header-icon"></i>
                                <span class="header-title">Satış Fiyatları</span>
                            </h3>
                        </div>
                        <div class="card-body">
                            <div class="detail-grid">
                                {% for sales_price in sales_prices %}
                                <div class="detail-section">
                                    <div class="detail-label">
                                        <i class="fas fa-money-bill info-icon"></i>
                                        Fiyat
                                    </div>
                                    <div class="detail-value">{{ sales_price.price }} {{ sales_price.currency }}</div>
                                </div>
                                <div class="detail-section">
                                    <div class="detail-label">
                                        <i class="fas fa-money-bill info-icon"></i>
                                        İşlemler
                                    </div>
                                    <div class="detail-value">
                                        <button type="button" class="btn btn-custom btn-edit" @click="updateSalesPriceModal{{ sales_price.id }} = true" style="background-color: #007bff; color: white;">
                                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M11.4001 18.1612L11.4001 18.1612L18.796 10.7653C17.7894 10.3464 16.5972 9.6582 15.4697 8.53068C14.342 7.40298 13.6537 6.21058 13.2348 5.2039L5.83882 12.5999L5.83879 12.5999C5.26166 13.1771 4.97307 13.4657 4.7249 13.7838C4.43213 14.1592 4.18114 14.5653 3.97634 14.995C3.80273 15.3593 3.67368 15.7465 3.41556 16.5208L2.05445 20.6042C1.92743 20.9852 2.0266 21.4053 2.31063 21.6894C2.59466 21.9734 3.01478 22.0726 3.39584 21.9456L7.47918 20.5844C8.25351 20.3263 8.6407 20.1973 9.00498 20.0237C9.43469 19.8189 9.84082 19.5679 10.2162 19.2751C10.5343 19.0269 10.823 18.7383 11.4001 18.1612Z" fill="currentColor"></path>
                                                <path d="M20.8482 8.71306C22.3839 7.17735 22.3839 4.68748 20.8482 3.15178C19.3125 1.61607 16.8226 1.61607 15.2869 3.15178L14.3999 4.03882C14.4121 4.0755 14.4246 4.11268 14.4377 4.15035C14.7628 5.0875 15.3763 6.31601 16.5303 7.47002C17.6843 8.62403 18.9128 9.23749 19.85 9.56262C19.8875 9.57563 19.9245 9.58817 19.961 9.60026L20.8482 8.71306Z" fill="currentColor"></path>
                                            </svg>
                                        </button>
                                        <a href="{% url 'tour:toggle_sales_price' sales_price.id %}?next={{ request.path }}" class="btn btn-custom btn-edit" style="background-color: #007bff; color: white;">
                                            {% if sales_price.is_active %}
                                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path opacity="0.5" d="M11.5956 22.0001H12.4044C15.1871 22.0001 16.5785 22.0001 17.4831 21.1142C18.3878 20.2283 18.4803 18.7751 18.6654 15.8686L18.9321 11.6807C19.0326 10.1037 19.0828 9.31524 18.6289 8.81558C18.1751 8.31592 17.4087 8.31592 15.876 8.31592H8.12405C6.59127 8.31592 5.82488 8.31592 5.37105 8.81558C4.91722 9.31524 4.96744 10.1037 5.06788 11.6807L5.33459 15.8686C5.5197 18.7751 5.61225 20.2283 6.51689 21.1142C7.42153 22.0001 8.81289 22.0001 11.5956 22.0001Z" fill="currentColor"></path>
                                                    <path d="M3 6.38597C3 5.90152 3.34538 5.50879 3.77143 5.50879L6.43567 5.50832C6.96502 5.49306 7.43202 5.11033 7.61214 4.54412C7.61688 4.52923 7.62232 4.51087 7.64185 4.44424L7.75665 4.05256C7.8269 3.81241 7.8881 3.60318 7.97375 3.41617C8.31209 2.67736 8.93808 2.16432 9.66147 2.03297C9.84457 1.99972 10.0385 1.99986 10.2611 2.00002H13.7391C13.9617 1.99986 14.1556 1.99972 14.3387 2.03297C15.0621 2.16432 15.6881 2.67736 16.0264 3.41617C16.1121 3.60318 16.1733 3.81241 16.2435 4.05256L16.3583 4.44424C16.3778 4.51087 16.3833 4.52923 16.388 4.54412C16.5682 5.11033 17.1278 5.49353 17.6571 5.50879H20.2286C20.6546 5.50879 21 5.90152 21 6.38597C21 6.87043 20.6546 7.26316 20.2286 7.26316H3.77143C3.34538 7.26316 3 6.87043 3 6.38597Z" fill="currentColor"></path>
                                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M9.42543 11.4815C9.83759 11.4381 10.2051 11.7547 10.2463 12.1885L10.7463 17.4517C10.7875 17.8855 10.4868 18.2724 10.0747 18.3158C9.66253 18.3592 9.29499 18.0426 9.25378 17.6088L8.75378 12.3456C8.71256 11.9118 9.01327 11.5249 9.42543 11.4815Z" fill="currentColor"></path>
                                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M14.5747 11.4815C14.9868 11.5249 15.2875 11.9118 15.2463 12.3456L14.7463 17.6088C14.7051 18.0426 14.3376 18.3592 13.9254 18.3158C13.5133 18.2724 13.2126 17.8855 13.2538 17.4517L13.7538 12.1885C13.795 11.7547 14.1625 11.4381 14.5747 11.4815Z" fill="currentColor"></path>
                                                </svg>
                                            {% else %}
                                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12ZM5.46056 11.0833C5.83331 7.79988 8.62404 5.25 12.0096 5.25C14.148 5.25 16.0489 6.26793 17.2521 7.84246C17.5036 8.17158 17.4406 8.64227 17.1115 8.89376C16.7824 9.14526 16.3117 9.08233 16.0602 8.7532C15.1289 7.53445 13.6613 6.75 12.0096 6.75C9.45213 6.75 7.33639 8.63219 6.9733 11.0833H7.33652C7.63996 11.0833 7.9135 11.2662 8.02953 11.5466C8.14556 11.8269 8.0812 12.1496 7.86649 12.364L6.69823 13.5307C6.40542 13.8231 5.9311 13.8231 5.63829 13.5307L4.47003 12.364C4.25532 12.1496 4.19097 11.8269 4.30699 11.5466C4.42302 11.2662 4.69656 11.0833 5 11.0833H5.46056ZM18.3617 10.4693C18.0689 10.1769 17.5946 10.1769 17.3018 10.4693L16.1335 11.636C15.9188 11.8504 15.8545 12.1731 15.9705 12.4534C16.0865 12.7338 16.3601 12.9167 16.6635 12.9167H17.0267C16.6636 15.3678 14.5479 17.25 11.9905 17.25C10.3464 17.25 8.88484 16.4729 7.9529 15.2638C7.70002 14.9358 7.22908 14.8748 6.90101 15.1277C6.57295 15.3806 6.512 15.8515 6.76487 16.1796C7.96886 17.7416 9.86205 18.75 11.9905 18.75C15.376 18.75 18.1667 16.2001 18.5395 12.9167H19C19.3035 12.9167 19.577 12.7338 19.693 12.4534C19.8091 12.1731 19.7447 11.8504 19.53 11.636L18.3617 10.4693Z" fill="currentColor"></path>
                                                </svg>
                                            {% endif %}
                                        </a>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>

                    {% for sales_price in sales_prices %}
                        {% include "operation/modals/update_sales_form.html" with sales_price=sales_price form=sales_price_forms|get_item:sales_price.id %}
                    {% endfor %}
                {% endif %}

                <!-- Operasyon Günleri -->
                {% for day in operation_days %}
                <div class="col-span-12">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between">
                            <h4 class="card-title">{{ day.date|date:"d.m.Y" }}</h4>
                            <div class="header-actions">
                                <button type="button" class="btn btn-custom btn-edit" @click="vehicleModal = true; selectedDayId = '{{ day.id }}'">
                                    <i class="fas fa-car"></i>
                                    Araç
                                </button>
                                <button type="button" class="btn btn-custom btn-edit" @click="noVehicleModal = true; selectedDayId = '{{ day.id }}'">
                                    <i class="fas fa-route"></i>
                                    Araçsız Tur
                                </button>
                                <button type="button" class="btn btn-custom btn-edit" @click="activityModal = true; selectedDayId = '{{ day.id }}'">
                                    <i class="fas fa-hiking"></i>
                                    Aktivite
                                </button>
                                <a href="{% url 'tour:toggle_operation_day' operation_day_id=day.id %}?next={{request.path}}" class="btn btn-custom btn-delete">
                                    <i class="fas fa-trash"></i>
                                    Sil
                                </a>
                                
                            </div>
                        </div>
                        <div class="card-body">
                            {% for item in grouped_items|get_item:day.date %}
                                <div class="card mb-4">
                                    <div class="card-header d-flex justify-content-between align-items-center">
                                        <h3 class="flex items-center gap-2">
                                            <i class="fas fa-file-alt text-xl"></i>
                                            <span>{%if item.item_type == 'VEHICLE' %} Araç {%elif item.item_type == 'NO_VEHICLE_TOUR' %} Araçsız Tur {%elif item.item_type == 'NO_VEHICLE_ACTIVITY' %} Aktivite {%endif%} Detayları</span>
                                        </h3>
                                        <div class="header-actions">
                                            {% if item.item_type == 'VEHICLE' %}
                                            <button type="button" class="btn btn-custom btn-edit" @click="updateVehicleModal{{ item.id }} = true">
                                                <i class="fas fa-edit"></i>
                                                Düzenle
                                            </button>
                                            {% elif item.item_type == 'NO_VEHICLE_TOUR' %}
                                            <button type="button" class="btn btn-custom btn-edit" @click="updateNoVehicleTourModal{{ item.id }} = true">
                                                <i class="fas fa-edit"></i>
                                                Düzenle
                                            </button>
                                            {% elif item.item_type == 'NO_VEHICLE_ACTIVITY' %}
                                            <button type="button" class="btn btn-custom btn-edit" @click="updateNoVehicleActivityModal{{ item.id }} = true">
                                                <i class="fas fa-edit"></i>
                                                Düzenle
                                            </button>
                                            {% endif %}
                                            <a href="{% url 'tour:toggle_operation_item' operation_item_id=item.id %}?next={{request.path}}" class="btn btn-custom btn-delete">
                                                <i class="fas fa-trash"></i>
                                                Sil
                                            </a>
                                        </div>
                                    </div>
                                    <div class="card-body">
                                        <!-- Konum Bilgileri -->
                                        <div class="grid grid-cols-3 gap-4 mb-4">
                                            <div class="space-y-4">
                                                <div class="bg-white rounded-lg p-3 border">
                                                    <div class="text-xs text-gray-500 flex items-center mb-1">
                                                        <i class="fas fa-clock mr-2"></i>
                                                        ALIŞ SAATİ
                                                    </div>
                                                    <div class="text-sm">{{ item.pick_time|default:"-"|upper }}</div>
                                                </div>
                                                <div class="bg-white rounded-lg p-3 border">
                                                    <div class="text-xs text-gray-500 flex items-center mb-1">
                                                        <i class="fas fa-map-pin mr-2"></i>
                                                        ALIŞ LOKASYONU
                                                    </div>
                                                    <div class="text-sm">{{ item.pick_up_location|default:"-"|upper }}</div>
                                                </div>
                                                <div class="bg-white rounded-lg p-3 border">
                                                    <div class="text-xs text-gray-500 flex items-center mb-1">
                                                        <i class="fas fa-map-pin mr-2"></i>
                                                        BIRAKIŞ LOKASYONU
                                                    </div>
                                                    <div class="text-sm">{{ item.drop_off_location|default:"-"|upper }}</div>
                                                </div>
                                            </div>

                                            <!-- Araç/Tur/Aktivite Bilgileri -->
                                            <div class="space-y-4">
                                                {% if item.item_type == 'VEHICLE' %}
                                                <div class="bg-white rounded-lg p-3 border">
                                                    <div class="text-xs text-gray-500 flex items-center mb-1">
                                                        <i class="fas fa-truck mr-2"></i>
                                                        ARAÇ TİPİ
                                                    </div>
                                                    <div class="text-sm">{{ item.vehicle_type|default:"-"|upper }}</div>
                                                </div>
                                                <div class="bg-white rounded-lg p-3 border">
                                                    <div class="text-xs text-gray-500 flex items-center mb-1">
                                                        <i class="fas fa-truck mr-2"></i>
                                                        ARAÇ PLAKASI
                                                    </div>
                                                    <div class="text-sm">{{ item.vehicle_plate_no|default:"-"|upper }}</div>
                                                </div>
                                                <div class="bg-white rounded-lg p-3 border">
                                                    <div class="text-xs text-gray-500 flex items-center mb-1">
                                                        <i class="fas fa-building mr-2"></i>
                                                        ARAÇ TEDARİKÇİSİ
                                                    </div>
                                                    <div class="text-sm">{{ item.vehicle_supplier|default:"-"|upper }}</div>
                                                </div>
                                                {% elif item.item_type == 'NO_VEHICLE_TOUR' %}
                                                <div class="bg-white rounded-lg p-3 border">
                                                    <div class="text-xs text-gray-500 flex items-center mb-1">
                                                        <i class="fas fa-route mr-2"></i>
                                                        TUR
                                                    </div>
                                                    <div class="text-sm">{{ item.no_vehicle_tour|default:"-"|upper }}</div>
                                                </div>
                                                {% elif item.item_type == 'NO_VEHICLE_ACTIVITY' %}
                                                <div class="bg-white rounded-lg p-3 border">
                                                    <div class="text-xs text-gray-500 flex items-center mb-1">
                                                        <i class="fas fa-hiking mr-2"></i>
                                                        AKTİVİTE
                                                    </div>
                                                    <div class="text-sm">{{ item.no_vehicle_activity|default:"-"|upper }}</div>
                                                </div>
                                                {% endif %}
                                            </div>

                                            <!-- Fiyat Bilgileri -->
                                            <div class="space-y-4">
                                                <div class="bg-white rounded-lg p-3 border">
                                                    <div class="text-xs text-gray-500 flex items-center mb-1">
                                                        <i class="fas fa-tag mr-2"></i>
                                                        SATIŞ FİYATI
                                                    </div>
                                                    <div class="text-sm">{{ item.sales_price|default:"-" }} {{ item.sales_currency|default:"-" }}</div>
                                                </div>
                                                <div class="bg-white rounded-lg p-3 border">
                                                    <div class="text-xs text-gray-500 flex items-center mb-1">
                                                        <i class="fas fa-coins mr-2"></i>
                                                        MALİYET FİYATI
                                                    </div>
                                                    <div class="text-sm">{{ item.cost_price|default:"-" }} {{ item.cost_currency|default:"-" }}</div>
                                                </div>
                                                <div class="bg-white rounded-lg p-3 border">
                                                    <div class="text-xs text-gray-500 flex items-center mb-1">
                                                        <i class="fas fa-coins mr-2"></i>
                                                        Notlar
                                                    </div>
                                                    <div class="text-sm">{{ item.notes|default:"-"|upper }}</div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Alt Öğe Ekleme Butonları -->
                                        <div class="mt-4 flex gap-2">
                                            {% if item.item_type == 'VEHICLE' %}
                                            <button type="button" class="btn btn-primary" @click="transferModal = true; selectedItemId = '{{ item.id }}'">
                                                <i class="fas fa-exchange-alt"></i> Transfer Ekle
                                            </button>
                                            <button type="button" class="btn btn-primary" @click="tourModal = true; selectedItemId = '{{ item.id }}'">
                                                <i class="fas fa-route"></i> Tur Ekle
                                            </button>
                                            {% endif %}
                                            <button type="button" class="btn btn-primary" @click="guideModal = true; selectedItemId = '{{ item.id }}'">
                                                <i class="fas fa-user-tie"></i> Rehber Ekle
                                            </button>
                                            <button type="button" class="btn btn-primary" @click="hotelModal = true; selectedItemId = '{{ item.id }}'">
                                                <i class="fas fa-hotel"></i> Otel Ekle
                                            </button>
                                            <button type="button" class="btn btn-primary" @click="museumModal = true; selectedItemId = '{{ item.id }}'">
                                                <i class="fas fa-landmark"></i> Müze Ekle
                                            </button>
                                            <button type="button" class="btn btn-primary" @click="expenseModal = true; selectedItemId = '{{ item.id }}'">
                                                <i class="fas fa-receipt"></i> Harcama Ekle
                                            </button>
                                            
                                            <button type="button" class="btn btn-primary" @click="subItemActivityModal = true; selectedItemId = '{{ item.id }}'">
                                                <i class="fas fa-hiking"></i> Aktivite Ekle
                                            </button>
                                        </div>
                                        <!-- Alt Öğeler -->
                                        {% if item.subitems.exists %}
                                        <div class="mt-4">
                                            <h5 class="text-lg font-semibold mb-3">Alt Öğeler</h5>
                                            <div class="grid grid-cols-2 gap-4">
                                                {% for sub_item in item.subitems.all %}
                                                {% if sub_item.is_active %}
                                                <div class="card">
                                                    <div class="card-header d-flex justify-content-between align-items-center">
                                                        <h6 class="flex items-center gap-2">
                                                            {% if sub_item.subitem_type == 'TOUR' %}
                                                            <i class="fas fa-route text-primary"></i>
                                                            <span>Tur</span>
                                                            {% elif sub_item.subitem_type == 'TRANSFER' %}
                                                            <i class="fas fa-exchange-alt text-info"></i>
                                                            <span>Transfer</span>
                                                            {% elif sub_item.subitem_type == 'MUSEUM' %}
                                                            <i class="fas fa-landmark text-warning"></i>
                                                            <span>Müze</span>
                                                            {% elif sub_item.subitem_type == 'HOTEL' %}
                                                            <i class="fas fa-hotel text-success"></i>
                                                            <span>Otel</span>
                                                            {% elif sub_item.subitem_type == 'GUIDE' %}
                                                            <i class="fas fa-user-tie text-danger"></i>
                                                            <span>Rehber</span>
                                                            {% elif sub_item.subitem_type == 'ACTIVITY' %}
                                                            <i class="fas fa-hiking text-purple"></i>
                                                            <span>Aktivite</span>
                                                            {% elif sub_item.subitem_type == 'OTHER_PRICE' %}
                                                            <i class="fas fa-receipt text-gray"></i>
                                                            <span>Harcama</span>
                                                            {% endif %}
                                                        </h6>
                                                        <div class="header-actions">
                                                            {% if sub_item.subitem_type == 'TOUR' %}
                                                            <button type="button" class="btn btn-custom btn-edit" @click="updateTourModal{{ sub_item.id }} = true">
                                                                <i class="fas fa-edit"></i>
                                                                Düzenle
                                                            </button>
                                                            {% elif sub_item.subitem_type == 'TRANSFER' %}
                                                            <button type="button" class="btn btn-custom btn-edit" @click="updateTransferModal{{ sub_item.id }} = true">
                                                                <i class="fas fa-edit"></i>
                                                                Düzenle
                                                            </button>
                                                            {% elif sub_item.subitem_type == 'MUSEUM' %}
                                                            <button type="button" class="btn btn-custom btn-edit" @click="updateMuseumModal{{ sub_item.id }} = true">
                                                                <i class="fas fa-edit"></i>
                                                                Düzenle
                                                            </button>
                                                            {% elif sub_item.subitem_type == 'HOTEL' %}
                                                            <button type="button" class="btn btn-custom btn-edit" @click="updateHotelModal{{ sub_item.id }} = true">
                                                                <i class="fas fa-edit"></i>
                                                                Düzenle
                                                            </button>
                                                            {% elif sub_item.subitem_type == 'GUIDE' %}
                                                            <button type="button" class="btn btn-custom btn-edit" @click="updateGuideModal{{ sub_item.id }} = true">
                                                                <i class="fas fa-edit"></i>
                                                                Düzenle
                                                            </button>
                                                            {% elif sub_item.subitem_type == 'ACTIVITY' %}
                                                            <button type="button" class="btn btn-custom btn-edit" @click="updateActivityModal{{ sub_item.id }} = true">
                                                                <i class="fas fa-edit"></i>
                                                                Düzenle
                                                            </button>
                                                            {% elif sub_item.subitem_type == 'OTHER_PRICE' %}
                                                            <button type="button" class="btn btn-custom btn-edit" @click="updateOtherPriceModal{{ sub_item.id }} = true">
                                                                <i class="fas fa-edit"></i>
                                                                Düzenle
                                                            </button>
                                                            {% endif %}
                                                            <a href="{% url 'tour:toggle_operation_sub_item' operation_sub_item_id=sub_item.id %}?next={{request.path}}" class="btn btn-custom btn-delete">
                                                                <i class="fas fa-trash"></i>
                                                                Sil
                                                            </a>
                                                        </div>
                                                    </div>
                                                    <div class="card-body">
                                                        <div class="space-y-2">
                                                            {% if sub_item.subitem_type == 'TOUR' %}
                                                            <div class="text-sm">Tur: {{ sub_item.tour|default:"-"|upper }}</div>
                                                            {% elif sub_item.subitem_type == 'TRANSFER' %}
                                                            <div class="text-sm">Transfer: {{ sub_item.transfer|default:"-"|upper }}</div>
                                                            {% elif sub_item.subitem_type == 'MUSEUM' %}
                                                            <div class="text-sm">
                                                                {% for museum in sub_item.museums.all %}
                                                                {{ museum|upper }}{% if not forloop.last %}, {% endif %}
                                                                {% endfor %}
                                                            </div>
                                                            {% elif sub_item.subitem_type == 'HOTEL' %}
                                                            <div class="text-sm">Otel: {{ sub_item.hotel|default:"-"|upper }}</div>
                                                            <div class="text-sm">Otel Tipi: {{ sub_item.get_room_type_display|default:"-"|upper }}</div>
                                                            {% elif sub_item.subitem_type == 'GUIDE' %}
                                                            <div class="text-sm">Rehber: {{ sub_item.is_guide|yesno:"Var,Yok"|upper }}</div>
                                                            <div class="text-sm">Rehber: {{ sub_item.guide|default:"-"|upper }}</div>
                                                            {% elif sub_item.subitem_type == 'ACTIVITY' %}
                                                            <div class="text-sm">Aktivite: {{ sub_item.activity|default:"-"|upper }}</div>
                                                            <div class="text-sm">Aktivite Tedarikçisi: {{ sub_item.activity_supplier|default:"-"|upper }}</div>
                                                            {% elif sub_item.subitem_type == 'OTHER_PRICE' %}
                                                            <div class="text-sm">Diğer Harcama: {{ sub_item.other_price_description|default:"-"|upper }}</div>
                                                            {% endif %}
                                                            <div class="text-sm">
                                                                Satış Fiyatı: {{ sub_item.sales_price|default:"-" }} {{ sub_item.sales_currency|default:"-" }} /
                                                                Maliyet Fiyatı: {{ sub_item.cost_price|default:"-" }} {{ sub_item.cost_currency|default:"-" }}
                                                            </div>
                                                            {% if sub_item.notes %}
                                                            <div class="text-sm text-gray-600">Not: {{ sub_item.notes|upper }}</div>
                                                            {% endif %}
                                                        </div>
                                                    </div>
                                                </div>
                                                {% endif %}
                                                {% endfor %}
                                            </div>
                                        </div>
                                        {% endif %}
                                    </div>
                                </div>
                            {% endfor %}
                            {% for item in grouped_items|get_item:day.date %}
                                {% if item.item_type == 'VEHICLE' %}
                                    {% include "operation/modals/update_vehicle_modal.html" with item=item form=vehicle_forms|get_item:item.id %}
                                {% elif item.item_type == 'NO_VEHICLE_TOUR' %}
                                    {% include "operation/modals/update_no_vehicle_tour.html" with item=item form=no_vehicle_tour_forms|get_item:item.id %}
                                {% elif item.item_type == 'NO_VEHICLE_ACTIVITY' %}
                                    {% include "operation/modals/update_no_vehicle_activity.html" with item=item form=no_vehicle_activity_forms|get_item:item.id %}
                                {% endif %}
                            {% endfor %}
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>

    {% for sub_item in operation_sub_items %}
        {% if sub_item.subitem_type == 'TOUR' %}
            {% include "operation/modals/update_tour_modal.html" with sub_item=sub_item form=tour_forms|get_item:sub_item.id %}
        {% elif sub_item.subitem_type == 'TRANSFER' %}
            {% include "operation/modals/update_transfer_modal.html" with sub_item=sub_item form=transfer_forms|get_item:sub_item.id %}
        {% elif sub_item.subitem_type == 'MUSEUM' %}
            {% include "operation/modals/update_museum_modal.html" with sub_item=sub_item form=museum_forms|get_item:sub_item.id %}
        {% elif sub_item.subitem_type == 'HOTEL' %}
            {% include "operation/modals/update_hotel_modal.html" with sub_item=sub_item form=hotel_forms|get_item:sub_item.id %}
        {% elif sub_item.subitem_type == 'GUIDE' %}
            {% include "operation/modals/update_guide_modal.html" with sub_item=sub_item form=guide_forms|get_item:sub_item.id %}
        {% elif sub_item.subitem_type == 'ACTIVITY' %}
            {% include "operation/modals/update_activity_modal.html" with sub_item=sub_item form=activity_forms|get_item:sub_item.id %}
        {% elif sub_item.subitem_type == 'OTHER_PRICE' %}
            {% include "operation/modals/update_other_price_modal.html" with sub_item=sub_item form=other_forms|get_item:sub_item.id %}
        {% endif %}
    {% endfor %}

    <!-- Modals -->
    {% include "operation/modals/vehicle_modal.html" %}
    {% include "operation/modals/no_vehicle_modal.html" %}
    {% include "operation/modals/activity_modal.html" %}
    {% include "operation/modals/guide_modal.html" %}
    {% include "operation/modals/hotel_modal.html" %}
    {% include "operation/modals/museum_modal.html" %}
    {% include "operation/modals/expense_modal.html" %}
    {% include "operation/modals/transfer_modal.html" %}
    {% include "operation/modals/tour_modal.html" %}
    {% include "operation/modals/sub_item_activity_modal.html" %}
    {% include "operation/modals/operation_modal.html" %}
</div>

{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('alpine:init', () => {
        Alpine.data('operationData', () => ({
            days: [],
            currentDay: null,
            init() {
                // Günleri yükle
                this.loadDays();
            },
            loadDays() {
                // Günleri yükleme işlemi
            }
        }));
    });
</script>
{% endblock %}

